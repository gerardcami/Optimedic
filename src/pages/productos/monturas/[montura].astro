---
import Layout from "../../../layouts/Layout.astro";
import type { Frames } from "../../../types/frames";
import FrameColors from "../../../components/frameColors";
import { getI18N } from "../../../i18n/";

const { currentLocale = "es" } = Astro;
const i18n = getI18N({ currentLocale });
const framesData = i18n.FRAMES.PRODUCTS;

const { montura } = Astro.params;

const product = framesData
  .flatMap((frameType: Frames) => frameType.products)
  .find((product) => product.slug === montura);


if (!product) {
  throw new Error(`Product not found for slug: ${montura}`);
}
---

<Layout title={product.name} description="">
  {
    product.details.map((detail) => (
      <section
      class="w-[calc(100vw-5px)] py-[50px] flex items-center justify-center gap-[100px] shadow-[0_20px_25px_-4px_rgba(7,107,97,0.5)]"
      >
        <article class="lg:w-1/3 flex flex-col gap-5">
          <h1 class="text-5xl">{product.name}</h1>
          <p class="text-lg">{detail.detailed_description}</p>
        </article>
        <figure class="w-[400px] flex justify-center items-center">
          <img class="w-full" src={product.card_image} alt={product.name} />
        </figure>
      </section>
      
      <section class="flex flex-col gap-[100px]">
        <article class="flex gap-[100px] justify-between items-center">
          <div class="flex flex-col gap-5">
            {detail.intro_text_1 && <p>{detail.intro_text_1}</p>}
            {detail.intro_text_2 && <p>{detail.intro_text_2}</p>}
            {detail.intro_text_3 && <p>{detail.intro_text_3}</p>}
          </div>
          <img 
            src={detail?.intro_image}
            alt="" 
            class="w-[500px] drop-shadow-2xl"
            style="border-radius: 43% 57% 32% 68% / 61% 52% 48% 39%;" 
          />
        </article>
        <FrameColors client:visible frame={product.name} colors={detail.colors} />
        
      </section>
    ))
  }
</Layout>