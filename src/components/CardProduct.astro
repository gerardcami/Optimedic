---
import { getI18N } from '../i18n/'
const { currentLocale = 'es' } = Astro
const i18n = getI18N({ currentLocale })

interface Props {
	productType: 'LOUPES' | 'FRAMES' | 'HEADLIGHTS'
}

const { productType } = Astro.props

const products = i18n[productType]['PRODUCTS']
const productsPath = i18n[productType]['PRODUCT_PATH']
console.log
---

<section class="flex flex-col gap-[50px] px-6 md:px-12">
	{
		products.map((type) => (
			<article class="flex flex-col gap-4 py-12">
				<header>
					<h2 class="mb-12 text-center text-3xl font-bold lg:text-start">{type.type}</h2>
				</header>
				<div class="flex flex-grow flex-wrap justify-center gap-[27px] lg:justify-start">
					{type.products.map((productData) => (
						<div class="flex max-w-[350px] flex-col gap-4">
							<a
								href={`${productsPath}${productData.slug}`}
								class="relative flex h-full transform cursor-pointer flex-col overflow-hidden rounded-md shadow-2xl transition-transform hover:scale-105 hover:shadow-lg"
							>
								<div
									class="relative h-48 bg-contain bg-center bg-no-repeat"
									style={{ backgroundImage: `url(${productData.card_image})` }}
								>
									<div class="absolute inset-0 bg-gray-400 opacity-10" />
								</div>
								<div class="flex flex-grow flex-col justify-between p-4">
									<div class="flex flex-col gap-4">
										<h3 class="text-xl font-bold">{productData.name}</h3>
										<div class="h-[2px] w-[10%] rounded-lg bg-[#076b61]" />
										<p>{productData.description}</p>
									</div>
								</div>
							</a>
						</div>
					))}
				</div>
			</article>
		))
	}
</section>
